import{d as F,v as K,r as g,W as L,G as W,b as n,c as f,e as x,f as t,w as l,F as X,h as Y,u as z,g as d,j as w,Y as H,X as J,t as b,l as S}from"./index-Xku4Yv_8.js";import{E as Q}from"./dict-BKYb64jL.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-ChC3_vEv.js";import{_ as u}from"./lodash-C7R_B3uJ.js";const ee={class:"form-event-wgn flex flex-column"},te={class:"flex-auto flex"},le={class:"custom-bg-box flex-auto"},ae={class:"flex items-end"},ie=F({__name:"index",props:{initData:{type:Object}},setup(A,{expose:D}){const G=A,V={NOISE_GAUSSIAN:Z},{t:c}=K.useI18n(),$=g(),y=g(),o=g({eventType:"NOISE_GAUSSIAN",list:[]}),N=L({name:[{required:!0,message:c("common.placeholder.input")+c("table.common.filename"),trigger:"blur"}],eventType:[{required:!0,message:c("common.placeholder.select")+c("table.events.type")}],list:[{required:!0,message:c("common.placeholder.add")+c("table.events.list")}]});W(()=>G.initData,e=>{e&&(o.value=u.assign(u.cloneDeep(e),{eventType:"NOISE_GAUSSIAN"}))},{deep:!0});const k=async()=>{const e=await T();e&&o.value.list.push({eventType:o.value.eventType,...e})},C=e=>{let s=u.assign({eventTime:e.eventTime},e.eventParm),m=[];return u.forEach(s,(r,i)=>{if(i!=="eventType"){let p="",_=`noiseGaussian.${i}`;if(p=`${c(_)}：${r}`,i==="enable"){let h=`noiseGaussian.${r}`;p=`${c(_)}：${c(h)}`}m.push(p)}}),u.join(m,"，")},E=e=>{o.value.list.splice(e,1)},I=async()=>await new Promise(e=>{y.value&&y.value.validate(s=>{e(s?o.value:!1)})}),P=async()=>{const e=await j(),s=await T(),m=await Promise.all([e,s]);if(u.every(m,Boolean)){let r={};return u.map(m,i=>u.merge(r,i)),r}else return!1},j=async()=>await I(),T=async()=>{var e;return await((e=$.value)==null?void 0:e.handleGetModel())};return D({handleGetModel:P}),(e,s)=>{const m=n("el-input"),r=n("el-form-item"),i=n("el-col"),p=n("el-row"),_=n("el-option"),h=n("el-select"),B=n("Plus"),U=n("el-icon"),v=n("el-table-column"),M=n("el-tag"),O=n("el-button"),R=n("el-table"),q=n("el-form");return f(),x("div",ee,[t(q,{class:"flex-auto flex flex flex-column",ref_key:"modelRef",ref:y,model:o.value,rules:N,"label-width":"100px"},{default:l(()=>[t(p,{gutter:20},{default:l(()=>[t(i,{span:12},{default:l(()=>[t(r,{class:"flex-auto",label:e.$t("table.common.filename")+"：",prop:"name"},{default:l(()=>[t(m,{modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=a=>o.value.name=a)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),t(p,{gutter:20},{default:l(()=>[t(i,{span:12},{default:l(()=>[t(r,{class:"flex-auto",label:e.$t("table.events.type")+"：",prop:"type"},{default:l(()=>[t(h,{modelValue:o.value.eventType,"onUpdate:modelValue":s[1]||(s[1]=a=>o.value.eventType=a),placeholder:e.$t("common.placeholder.select"),style:{width:"100%"}},{default:l(()=>[(f(!0),x(X,null,Y(z(Q),a=>(f(),w(_,{key:a.type,label:e.$t(`eventsType.${a.type}`),value:a.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),t(p,{gutter:20},{default:l(()=>[t(i,{span:24},{default:l(()=>[t(r,{class:"flex-auto"},{default:l(()=>[d("div",te,[d("div",le,[(f(),w(J,null,[(f(),w(H(V[o.value.eventType]),{ref_key:"dynamicRef",ref:$},null,512))],1024))]),d("div",ae,[d("div",{class:"btn flex items-center justify-center pointer ml10",onClick:k},[t(U,null,{default:l(()=>[t(B)]),_:1}),d("span",null,b(e.$t("btn.addToTabel")),1)])])])]),_:1})]),_:1})]),_:1}),t(r,{class:"flex flex-auto",label:e.$t("table.events.list")+"：",prop:"list"},{default:l(()=>[t(R,{class:"h100",data:o.value.list,border:"",stripe:""},{default:l(()=>[t(v,{type:"index",align:"center",label:e.$t("table.common.index"),width:"100"},null,8,["label"]),t(v,{prop:"type",align:"center",label:e.$t("table.events.type"),width:"200"},{default:l(a=>[t(M,{type:"primary"},{default:l(()=>[S(b(e.$t(`eventsType.${a.row.eventType}`)),1)]),_:2},1024)]),_:1},8,["label"]),t(v,{align:"center",label:e.$t("table.events.params"),"show-overflow-tooltip":""},{default:l(a=>[d("span",null,b(C(a.row)),1)]),_:1},8,["label"]),t(v,{align:"center",label:e.$t("table.common.operation"),width:"100"},{default:l(a=>[t(O,{type:"danger",link:"",onClick:ne=>E(a.$index)},{default:l(()=>[S(b(e.$t("btn.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])}}});export{ie as _};
