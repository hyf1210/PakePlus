var pe=Object.defineProperty;var _e=(C,o,u)=>o in C?pe(C,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):C[o]=u;var O=(C,o,u)=>_e(C,typeof o!="symbol"?o+"":o,u);import{d as x,r as h,o as j,a as V,b as i,c as S,e as M,f as e,u as B,w as a,l as G,t as E,N as J,Q as se,$ as ie,D as P,j as D,h as le,F as K,g as y,P as ge,a2 as he,i as Z,a3 as ne,J as re,z as oe,m as v,v as W,y as ae,W as ce,V as X,a0 as ve,a4 as be,X as Se,Y as ye,T as we}from"./index-Xku4Yv_8.js";import{e as Ce,g as $e,a as ke,b as Re,c as ue,d as De,u as Ae}from"./equipment-BJ8NO0ZY.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{G as H}from"./index-DXDSQOyL.js";import{p as me,b as Te,c as Ee,d as xe,q as Ie,r as Le,S as de,t as Me,u as Fe}from"./simulation-C2GBFQc4.js";import{_ as k}from"./lodash-C7R_B3uJ.js";import{d as fe,u as Pe,e as Ve}from"./index-tRiLkRmM.js";import{O as Oe,S as He}from"./dict-BKYb64jL.js";import{T as U}from"./index-CdBsi4Qi.js";import{_ as Y}from"./index.vue_vue_type_style_index_0_lang-BqDBT5xg.js";import{_ as Ne}from"./index.vue_vue_type_style_index_0_lang-CVeWsgLW.js";import{u as je}from"./useHandleData-CjGr2aYO.js";import"./index-DupTiM6y.js";const qe=x({__name:"index",props:{url:{type:String}},emits:["on-receiveMsg","on-disconnect"],setup(C,{expose:o,emit:u}){const r=C,t=h(null),l=u;j(()=>{r.url&&s(r.url)}),V(()=>{t.value&&t.value.close()});const s=m=>{const n=new p(m);t.value=n,n.onopen=()=>{},n.onmessage=c=>{l("on-receiveMsg",c.data)},n.onerror=c=>{}};class p{constructor(n,c={}){O(this,"url");O(this,"options");O(this,"eventSource");O(this,"retryInterval");O(this,"maxRetryInterval");O(this,"onopen");O(this,"onmessage");O(this,"onerror");O(this,"retryTimer");O(this,"lastEventId");this.url=n,this.options=c,this.eventSource=null,this.retryInterval=1e3,this.maxRetryInterval=3e4,this.onopen=null,this.onmessage=null,this.onerror=null,this.retryTimer=null,this.lastEventId=null,window.addEventListener("online",()=>this._reconnect()),window.addEventListener("offline",()=>this._handleNetworkChange()),this._connect()}_connect(){this.eventSource&&this.eventSource.close();const n={...this.options};this.lastEventId&&(n.headers={...n.headers,"Last-Event-ID":this.lastEventId}),this.eventSource=new EventSource(this.url,n),this.eventSource.onopen=c=>{console.log("连接已建立"),this.retryInterval=1e3,this.onopen&&this.onopen(c)},this.eventSource.onmessage=c=>{this.lastEventId=c.lastEventId,this.onmessage&&this.onmessage(c)},this.eventSource.onerror=c=>{console.error("连接错误:",c),l("on-disconnect"),this._handleError(),this.onerror&&this.onerror(c)}}_handleError(){this.eventSource.readyState===EventSource.CLOSED&&(console.log("连接已关闭，开始重连..."),this._scheduleReconnect())}_handleNetworkChange(){navigator.onLine?(console.log("网络连接已恢复，尝试重连..."),this._reconnect()):(console.log("网络连接已断开"),l("on-disconnect"),this.eventSource&&this.eventSource.close())}_scheduleReconnect(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=setTimeout(()=>{navigator.onLine?this._connect():(console.log("网络未恢复，继续等待..."),this._scheduleReconnect())},this.retryInterval),this.retryInterval=Math.min(this.retryInterval*2,this.maxRetryInterval)}_reconnect(){this.retryTimer&&clearTimeout(this.retryTimer),this._connect()}close(){this.retryTimer&&clearTimeout(this.retryTimer),this.eventSource&&(this.eventSource.close(),this.eventSource=null)}}return o({sse:t}),(m,n)=>null}}),Be="data:image/png;base64,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",Ge={class:"app-logo flex items-center"},Ue=x({__name:"index",setup(C){return(o,u)=>{const r=i("el-image"),t=i("el-text");return S(),M("div",Ge,[e(r,{class:"logo-image",src:B(Be)},null,8,["src"]),e(t,{class:"logo-text ml10",tag:"b"},{default:a(()=>[G(E(o.$t("systemName")),1)]),_:1})])}}}),ze=z(Ue,[["__scopeId","data-v-4f8cd66c"]]),Qe={class:"title"},Ke=x({__name:"index",setup(C){const o=J(),u=se(),r=ie(),t=P(()=>r.showMenuListGet),l=P(()=>o.meta.activeMenu?o.meta.activeMenu:o.path),s=p=>{u.push(p.path)};return(p,m)=>{const n=i("el-menu-item"),c=i("el-menu");return S(),D(c,{mode:"horizontal","default-active":l.value,router:!1},{default:a(()=>[(S(!0),M(K,null,le(t.value,w=>(S(),D(n,{key:w.path,onClick:b=>s(w),index:w.path},{title:a(()=>[y("span",Qe,E(p.$t(`menu.${w.name}`)),1)]),_:2},1032,["onClick","index"]))),128))]),_:1},8,["default-active"])}}}),Ye=z(Ke,[["__scopeId","data-v-24a191e5"]]),Ze={class:"header-left flex items-center"},Xe={class:"header-right flex items-center"},Je=x({__name:"index",props:{initStage:{type:Object}},setup(C){const o=C,u=se(),r=J(),t=P(()=>r.path!==ne),l=h(!1),s=()=>{u.push(ne)},p=async()=>{l.value=!0,await me(),re(1e3),l.value=!1};return(m,n)=>{const c=i("el-header");return S(),D(c,{class:"app-header flex justify-between"},{default:a(()=>{var w,b;return[y("div",Ze,[e(ze),e(Ye)]),y("div",Xe,[!o.initStage||((w=o.initStage)==null?void 0:w.stage)==="IDLE"?ge((S(),D(H,{key:0,onClick:s,icon:"icon-playfill",label:"simStart"},null,512)),[[he,t.value]]):Z("",!0),o.initStage&&((b=o.initStage)==null?void 0:b.stage)!=="IDLE"?(S(),D(H,{key:1,class:"danger",onClick:p,icon:"icon-stop_fill",label:"simStop",loading:l.value},null,8,["loading"])):Z("",!0)])]}),_:1})}}}),We=z(Je,[["__scopeId","data-v-595466c9"]]),et={class:"title ml20"},tt={class:"title"},lt={class:"title ml20"},at=x({__name:"index",setup(C){const o=J(),u=se(),r=ie(),t=P(()=>o.meta.activeMenu?o.meta.activeMenu:o.path),l=P(()=>o.meta.asideActiveMenu?o.meta.asideActiveMenu:o.path),s=P(()=>r.showMenuListGet),p=P(()=>{const n=k.find(s.value,c=>t.value==="/scene/suppress"?c.path==="/scene":c.path===t.value);return(n==null?void 0:n.children)??[]}),m=n=>{u.push(n.path)};return(n,c)=>{const w=i("el-menu-item"),b=i("el-sub-menu"),_=i("el-menu"),d=i("el-aside");return p.value.length?(S(),D(d,{key:0,class:"app-aside",width:"270px"},{default:a(()=>[e(_,{"default-active":l.value,router:!1,"unique-opened":!0},{default:a(()=>[(S(!0),M(K,null,le(p.value,f=>{var R;return S(),M(K,{key:f.path},[(R=f.children)!=null&&R.length?(S(),D(b,{key:0,index:f.path},{title:a(()=>[y("i",{class:oe(["icon iconfont",`icon-${f.meta.icon}`])},null,2),y("span",et,E(n.$t(`menu.${f.name}`)),1)]),default:a(()=>[(S(!0),M(K,null,le(f.children,T=>(S(),D(w,{key:f.path,class:"flex items-center justify-center",onClick:g=>m(T),index:T.path},{title:a(()=>[y("span",tt,E(n.$t(`menu.${T.name}`)),1)]),_:2},1032,["onClick","index"]))),128))]),_:2},1032,["index"])):(S(),D(w,{key:1,class:"flex items-center",onClick:T=>m(f),index:f.path},{title:a(()=>[y("i",{class:oe(["icon iconfont",`icon-${f.meta.icon}`])},null,2),y("span",lt,E(n.$t(`menu.${f.name}`)),1)]),_:2},1032,["onClick","index"]))],64)}),128))]),_:1},8,["default-active"])]),_:1})):Z("",!0)}}}),nt={class:"header-item flex items-center"},ot=x({__name:"index",setup(C){const o=h(!1),{start:u,stop:r,isPending:t}=fe(()=>{o.value=!1},5e3);return v.on("isReceive",()=>{o.value=!0,u()}),V(()=>{v.off("isReceive"),r()}),(l,s)=>{const p=i("Bell"),m=i("el-icon");return S(),M("div",nt,[e(m,{class:oe(["f20 icon",{animate__heartBeat:o.value,active:o.value}]),style:{outline:"none"}},{default:a(()=>[e(p)]),_:1},8,["class"])])}}}),st=z(ot,[["__scopeId","data-v-86bd3881"]]),it={class:"runtimes-status"},rt={class:"label"},ct={class:"ml5"},ut=x({__name:"index",setup(C){const{t:o}=W.useI18n(),u=h([]);v.on("/gnss/hm/runtime/status",()=>{r()}),j(()=>{r()}),V(()=>{v.off("/gnss/hm/runtime/status")});const r=async()=>{const{data:l}=await Ce();v.emit("sim:time",l),k(l).forEach(s=>{s.formatSysRunSeconds=t(s.sysRunSeconds),s.formatLocalTime=Pe(s.localTime*1e3,"YYYY-MM-DD HH:mm:ss")}),u.value=l},t=l=>{const s=Math.floor(l/3600),p=Math.floor(l%3600/60),m=l%60;return`${s}${o("common.hour")}${p}${o("common.minute")}${m}${o("common.second")}`};return(l,s)=>{const p=i("el-table-column"),m=i("el-table"),n=i("el-tooltip");return S(),M("div",it,[e(n,{effect:"dark"},{content:a(()=>[e(m,{border:"",data:u.value,size:"small"},{default:a(()=>[e(p,{prop:"sn",label:l.$t("footer.tableHeader.sn"),align:"center",width:"140"},null,8,["label"]),e(p,{prop:"formatSysRunSeconds",label:l.$t("footer.tableHeader.formatSysRunSeconds"),align:"center",width:"180"},null,8,["label"]),e(p,{prop:"envTemperature",label:l.$t("footer.tableHeader.envTemperature"),align:"center"},null,8,["label"]),e(p,{prop:"cpuUsage",label:l.$t("footer.tableHeader.cpuUsage"),align:"center",width:"100"},null,8,["label"]),e(p,{prop:"formatLocalTime",label:l.$t("footer.tableHeader.formatLocalTime"),align:"center",width:"140"},null,8,["label"])]),_:1},8,["data"])]),default:a(()=>[y("div",rt,[s[0]||(s[0]=y("i",{class:"icon iconfont icon-Runtime mr5"},null,-1)),y("span",ct,E(l.$t("footer.labelRuntimesStatus")),1)])]),_:1})])}}}),mt={class:"runtimes-clock"},dt={class:"ml5"},ft=x({__name:"index",setup(C){const o=h([]);v.on("/gnss/hm/runtime/clock",()=>{r()});const u=P(()=>{let t=!1;return t=!!(k.isEmpty(o.value)||k.find(o.value,l=>l.ocoxStatus==="UNLOCK")),t?"color:#F56C6C":""});j(()=>{r()}),V(()=>{v.off("/gnss/hm/runtime/clock")});const r=async()=>{const{data:t}=await $e();o.value=t};return(t,l)=>{const s=i("el-table-column"),p=i("el-tag"),m=i("el-table"),n=i("el-tooltip");return S(),M("div",mt,[e(n,{effect:"dark"},{content:a(()=>[e(m,{border:"",data:o.value,size:"small"},{default:a(()=>[e(s,{prop:"sn",label:t.$t("footer.tableHeader.sn"),align:"center",width:"140"},null,8,["label"]),e(s,{prop:"controlVoltage",label:t.$t("footer.tableHeader.controlVoltage"),align:"center",width:"150"},null,8,["label"]),e(s,{prop:"timeAccuracy",label:t.$t("footer.tableHeader.timeAccuracy"),align:"center",width:"150"},null,8,["label"]),e(s,{prop:"ocoxStatus",label:t.$t("footer.tableHeader.ocoxStatus"),align:"center"},{default:a(c=>[e(p,{type:B(Oe)[c.row.ocoxStatus].type,effect:"dark"},{default:a(()=>[G(E(t.$t(`ocoxStatus.${c.row.ocoxStatus}`)),1)]),_:2},1032,["type"])]),_:1},8,["label"])]),_:1},8,["data"])]),default:a(()=>[y("div",{class:"label",style:ae(u.value)},[l[0]||(l[0]=y("i",{class:"icon iconfont icon-clock mr5"},null,-1)),y("span",dt,E(t.$t("footer.labelClockStatus")),1)],4)]),_:1})])}}}),pt={class:"runtimes-chip"},_t={class:"ml5"},gt=x({__name:"index",setup(C){const o=h([]);v.on("/gnss/hm/runtime/chip",()=>{r()});const u=P(()=>{let t=!1;return t=!!(k.isEmpty(o.value)||k.find(o.value,l=>!l.arm||!l.fpga)),t?"color:#F56C6C":""});j(()=>{r()}),V(()=>{v.off("/gnss/hm/runtime/chip")});const r=async()=>{const{data:t}=await ke();o.value=t};return(t,l)=>{const s=i("el-table-column"),p=i("el-table"),m=i("el-tooltip");return S(),M("div",pt,[e(m,{effect:"dark"},{content:a(()=>[e(p,{border:"",data:o.value,size:"small"},{default:a(()=>[e(s,{prop:"sn",label:t.$t("footer.tableHeader.sn"),align:"center",width:"140"},null,8,["label"]),e(s,{prop:"arm",label:t.$t("footer.tableHeader.arm"),align:"center",width:"100"},{default:a(n=>[e(U,{label:t.$t(`armStatus.${n.row.arm}`),status:n.row.arm?"success":"danger"},null,8,["label","status"])]),_:1},8,["label"]),e(s,{prop:"fpga",label:t.$t("footer.tableHeader.fpga"),align:"center",width:"120"},{default:a(n=>[e(U,{label:t.$t(`fpgaStaus.${n.row.fpga}`),status:n.row.fpga?"success":"danger"},null,8,["label","status"])]),_:1},8,["label"])]),_:1},8,["data"])]),default:a(()=>[y("div",{class:"label",style:ae(u.value)},[l[0]||(l[0]=y("i",{class:"icon iconfont icon-chip mr5"},null,-1)),y("span",_t,E(t.$t("footer.labelChipStatus")),1)],4)]),_:1})])}}}),ht={class:"runtimes-receiver"},vt={class:"ml5"},bt=x({__name:"index",setup(C){const o=h([]);v.on("/gnss/hm/runtime/receiver",()=>{r()});const u=P(()=>{let t=!1;return t=!!(k.isEmpty(o.value)||k.find(o.value,l=>!l.locationStatus||!l.attenStatus)),t?"color:#F56C6C":""});j(()=>{r()}),V(()=>{v.off("/gnss/hm/runtime/receiver")});const r=async()=>{const{data:t}=await Re();k(t).forEach(l=>{l.lon=k.round(l.lon,6),l.lat=k.round(l.lat,6),l.alt=k.round(l.alt,6)}),o.value=t};return(t,l)=>{const s=i("el-table-column"),p=i("el-table"),m=i("el-tooltip");return S(),M("div",ht,[e(m,{effect:"dark"},{content:a(()=>[e(p,{border:"",data:o.value,size:"small"},{default:a(()=>[e(s,{prop:"sn",label:t.$t("footer.tableHeader.sn"),align:"center",width:"140"},null,8,["label"]),e(s,{prop:"model",label:t.$t("footer.tableHeader.receiverModel"),align:"center",width:"80"},null,8,["label"]),e(s,{prop:"lon",label:t.$t("common.geo.lon"),align:"center",width:"100"},null,8,["label"]),e(s,{prop:"lat",label:t.$t("common.geo.lat"),align:"center",width:"100"},null,8,["label"]),e(s,{prop:"alt",label:t.$t("common.geo.alt"),align:"center",width:"100"},null,8,["label"]),e(s,{prop:"locationStatus",label:t.$t("footer.tableHeader.locationStatus"),align:"center",width:"80"},{default:a(n=>[e(U,{label:t.$t(`locationStatus.${n.row.locationStatus}`),status:n.row.locationStatus?"success":"info"},null,8,["label","status"])]),_:1},8,["label"]),e(s,{prop:"attenStatus",label:t.$t("footer.tableHeader.attenStatus"),align:"center",width:"80"},{default:a(n=>[e(U,{label:t.$t(`attenStatus.${n.row.attenStatus}`),status:n.row.attenStatus?"success":"info"},null,8,["label","status"])]),_:1},8,["label"])]),_:1},8,["data"])]),default:a(()=>[y("div",{class:"label",style:ae(u.value)},[l[0]||(l[0]=y("i",{class:"icon iconfont icon-receiver mr5"},null,-1)),y("span",vt,E(t.$t("footer.labelReceiverStatus")),1)],4)]),_:1})])}}}),St={class:"runtimes-rf-channel"},yt={class:"ml5"},wt=x({__name:"index",setup(C){const o=h([]);v.on("/gnss/hm/runtime/freqStatus",()=>{u()}),j(()=>{u()}),V(()=>{v.off("/gnss/hm/runtime/freqStatus")});const u=async()=>{const{data:t}=await ue();k(t).forEach(l=>{let s=k.split(l.freqType,"_");l.freq=s[1],l.gnssType=s[0],l.powerFactor=k.round(l.powerFactor,2)}),o.value=t},r=()=>{v.emit("dialog:adjustPower")};return(t,l)=>{const s=i("el-table-column"),p=i("el-tag"),m=i("el-table"),n=i("el-tooltip");return S(),M("div",St,[e(n,{effect:"dark"},{content:a(()=>[e(m,{border:"",data:o.value,size:"small","max-height":"200px"},{default:a(()=>[e(s,{prop:"sn",label:t.$t("footer.tableHeader.sn"),align:"center",width:"140"},null,8,["label"]),e(s,{prop:"freq",label:t.$t("footer.tableHeader.freqType"),align:"center",width:"80"},null,8,["label"]),e(s,{label:t.$t("footer.tableHeader.gnssType"),align:"center",width:"80"},{default:a(({row:c})=>[e(p,{type:"primary",size:"small"},{default:a(()=>[G(E(c.gnssType),1)]),_:2},1024)]),_:1},8,["label"]),e(s,{prop:"powerFactor",label:t.$t("footer.tableHeader.powerFactor"),align:"center",width:"80"},null,8,["label"])]),_:1},8,["data"])]),default:a(()=>[y("div",{class:"label",onClick:r},[l[0]||(l[0]=y("i",{class:"icon iconfont icon-rfid-fill mr5"},null,-1)),y("span",yt,E(t.$t("footer.labelRfChannelStatus")),1)])]),_:1})])}}}),Ct={class:"runtimes-link"},$t={class:"ml5"},kt=x({__name:"index",setup(C){const o=h([]);v.on("/gnss/hm/runtime/clock",()=>{r()});const u=P(()=>{let t=!1;return t=!!(k.isEmpty(o.value)||k.find(o.value,l=>!l.link||!l.data)),t?"color:#F56C6C":""});j(()=>{r()}),V(()=>{v.off("/gnss/hm/runtime/clock")});const r=async()=>{const{data:t}=await De();o.value=t};return(t,l)=>{const s=i("el-table-column"),p=i("el-table"),m=i("el-tooltip");return S(),M("div",Ct,[e(m,{effect:"dark"},{content:a(()=>[e(p,{border:"",data:o.value,size:"small"},{default:a(()=>[e(s,{prop:"host",label:t.$t("footer.tableHeader.host"),align:"center",width:"150"},null,8,["label"]),e(s,{prop:"port",label:t.$t("footer.tableHeader.port"),align:"center",width:"100"},null,8,["label"]),e(s,{prop:"data",label:t.$t("footer.tableHeader.dataStatus"),align:"center"},{default:a(n=>[e(U,{label:t.$t(`dataStatus.${n.row.data}`),status:n.row.data?"success":"danger"},null,8,["label","status"])]),_:1},8,["label"]),e(s,{prop:"link",label:t.$t("footer.tableHeader.linkStatus"),align:"center"},{default:a(n=>[e(U,{label:t.$t(`linkStatus.${n.row.link}`),status:n.row.link?"success":"danger"},null,8,["label","status"])]),_:1},8,["label"])]),_:1},8,["data"])]),default:a(()=>[y("div",{class:"label",style:ae(u.value)},[l[0]||(l[0]=y("i",{class:"icon iconfont icon-network mr5"},null,-1)),y("span",$t,E(t.$t("footer.labelNetworkStatus")),1)],4)]),_:1})])}}}),Rt=x({__name:"index",setup(C){return(o,u)=>{const r=i("el-footer");return S(),D(r,{class:"app-footer flex items-center justify-end"},{default:a(()=>[e(st),e(ut,{class:"ml20"}),e(ft,{class:"ml20"}),e(gt,{class:"ml20"}),e(bt,{class:"ml20"}),e(wt,{class:"ml20"}),e(kt,{class:"ml20"})]),_:1})}}}),Dt=z(Rt,[["__scopeId","data-v-46a323dd"]]),At={class:"custom-breadcrumb flex items-center"},Tt={class:"breadcrumb-title"},Et={class:"breadcrumb-title"},xt=x({__name:"index",setup(C){const o=J(),u=ie(),r=P(()=>{let t=u.breadcrumbListGet[o.matched[o.matched.length-1].path]??[];return k.slice(t,1)||[]});return(t,l)=>{const s=i("HomeFilled"),p=i("el-icon"),m=i("el-breadcrumb-item"),n=i("el-breadcrumb");return S(),M("div",At,[e(p,{class:"mr10 f24",color:"#BFE3FF"},{default:a(()=>[e(s)]),_:1}),e(n,{separator:"/"},{default:a(()=>[(S(!0),M(K,null,le(r.value,(c,w)=>(S(),M(K,{key:c.path},[w!==r.value.length-1?(S(),D(m,{key:0,to:{path:c.path}},{default:a(()=>[y("span",Tt,E(t.$t(`menu.${c.name}`)),1)]),_:2},1032,["to"])):(S(),D(m,{key:1},{default:a(()=>[y("span",Et,E(t.$t(`menu.${c.name}`)),1)]),_:2},1024))],64))),128))]),_:1})])}}}),It={class:"flex justify-center"},Lt=x({__name:"index",setup(C,{expose:o}){const{t:u}=W.useI18n(),r=h(null),t=h([]),l=h(),s=h();v.on("refresh:SimConfigList",()=>{R()}),V(()=>{v.off("refresh:SimConfigList")});const p=({row:g,column:A,rowIndex:I,columnIndex:F})=>{if(F===3){const $=m("detail");return $[I]>0?[$[I],1]:[0,0]}},m=g=>{let A=[],I=0;for(let F=0;F<t.value.length;F++)F===0?(A.push(1),I=0):t.value[F][g]===t.value[F-1][g]?(A[I]+=1,A.push(0)):(A.push(1),I=F);return A},n=()=>{var g;(g=r.value)==null||g.handleOpenDialog(),R()},c=()=>{var g;w(),(g=r.value)==null||g.handleCloseDialog()},w=()=>{s.value="",l.value={}},b=async g=>{await je(u,Ee,g.name,`${u("btn.delete")}【${g.name}】`),R()},_=g=>{v.emit("dialog:simRenameConfig",g)},d=async()=>{await T(s.value);const g=k.cloneDeep(l.value);v.emit("dialog:simConfigGet",g),c()},f=g=>{s.value=g.name},R=async()=>{const{data:g}=await Te();t.value=g},T=async g=>{const{data:A}=await xe({name:g});l.value=A};return o({handleOpenDialog:n}),(g,A)=>{const I=i("el-table-column"),F=i("el-radio"),$=i("el-button"),L=i("el-table");return S(),D(Y,{class:"dialog-read-config",ref_key:"customDialogRef",ref:r,width:600,title:"readConfig"},{footer:a(()=>[y("div",It,[e(H,{label:"confirm",onClick:d}),e(H,{class:"ml50",label:"cancel",onClick:c})])]),default:a(()=>[e(Ne,{label:"simConfigHistory"}),e(L,{class:"mt20",data:t.value,"span-method":p,border:"",height:300,size:"small"},{default:a(()=>[e(I,{type:"index",width:"50",align:"center",label:g.$t("table.common.index")},null,8,["label"]),e(I,{prop:"name",label:g.$t("table.simulation.name")},{default:a(N=>[e(F,{modelValue:s.value,"onUpdate:modelValue":A[0]||(A[0]=q=>s.value=q),label:N.row.name,onChange:q=>f(N.row)},null,8,["modelValue","label","onChange"])]),_:1},8,["label"]),e(I,{label:g.$t("table.common.operation"),width:"120"},{default:a(N=>[e($,{type:"danger",link:"",onClick:q=>b(N.row)},{default:a(()=>[G(E(g.$t("btn.delete")),1)]),_:2},1032,["onClick"]),e($,{type:"primary",link:"",onClick:q=>_(N.row)},{default:a(()=>[G(E(g.$t("btn.rename")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)}}}),Mt={class:"flex justify-center"},Ft=x({__name:"index",setup(C,{expose:o}){const{t:u}=W.useI18n(),r=h(null),t=h(),l=h({name:""}),s=h(),p=ce({name:[{required:!0,message:u("common.placeholder.input")+u("table.simulation.name"),trigger:"blur"}]}),m=_=>{var d;s.value=_,(d=r.value)==null||d.handleOpenDialog()},n=()=>{var _;c(),(_=r.value)==null||_.handleCloseDialog()},c=()=>{var _;(_=t.value)==null||_.resetFields()},w=async()=>await new Promise(_=>{t.value&&t.value.validate(d=>{_(d?l.value:!1)})}),b=async()=>{const _=await w();if(_){let d={src:s.value.name,dst:_.name};const f=await Ie(d);f.code===0?X({message:f.data,type:"success"}):X({message:f.data,type:"error"}),n(),v.emit("refresh:SimConfigList")}};return o({handleOpenDialog:m}),(_,d)=>{const f=i("el-input"),R=i("el-form-item"),T=i("el-form");return S(),D(Y,{class:"dialog-rename-config",ref_key:"customDialogRef",ref:r,width:500,title:"renameConfig"},{footer:a(()=>[y("div",Mt,[e(H,{label:"confirm",onClick:b}),e(H,{class:"ml50",label:"cancel",onClick:n})])]),default:a(()=>[e(T,{class:"mt50",ref_key:"modelRef",ref:t,model:l.value,rules:p},{default:a(()=>[e(R,{label:_.$t("table.simulation.name")+"：",prop:"name"},{default:a(()=>[e(f,{modelValue:l.value.name,"onUpdate:modelValue":d[0]||(d[0]=g=>l.value.name=g),placeholder:_.$t("common.placeholder.input")+_.$t("table.simulation.name"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},512)}}}),Pt={class:"flex justify-center"},Vt=x({__name:"index",setup(C,{expose:o}){const{t:u}=W.useI18n(),r=h(null),t=h(),l=h({name:""}),s=ce({name:[{required:!0,message:u("common.placeholder.input")+u("table.simulation.name"),trigger:"blur"}]}),p=h([]),m=d=>{var f;p.value=d,(f=r.value)==null||f.handleOpenDialog()},n=()=>{var d;c(),w(),(d=r.value)==null||d.handleCloseDialog()},c=()=>{p.value=[]},w=()=>{var d;(d=t.value)==null||d.resetFields()},b=async()=>await new Promise(d=>{t.value&&t.value.validate(f=>{d(f?l.value:!1)})}),_=async()=>{const d=await b();if(d){let f={};k(p.value).forEach(T=>{if(f[T.type]=k.pick(T,["dataType","value"]),T.type==="startTime"){let g=T.value/1e3;f.startTime.value=g}});const R=await Le(f,d.name);R.code===0?X({message:R.data,type:"success"}):X({message:R.data,type:"error"}),n(),v.emit("refresh:SimConfigList")}};return o({handleOpenDialog:m}),(d,f)=>{const R=i("el-input"),T=i("el-form-item"),g=i("el-form");return S(),D(Y,{class:"dialog-save-config",ref_key:"customDialogRef",ref:r,width:500,title:"saveConfig"},{footer:a(()=>[y("div",Pt,[e(H,{label:"confirm",onClick:_}),e(H,{class:"ml50",label:"cancel",onClick:n})])]),default:a(()=>[e(g,{ref_key:"modelRef",ref:t,model:l.value,rules:s},{default:a(()=>[e(T,{label:d.$t("table.simulation.name")+"：",prop:"name"},{default:a(()=>[e(R,{modelValue:l.value.name,"onUpdate:modelValue":f[0]||(f[0]=A=>l.value.name=A),placeholder:d.$t("common.placeholder.input")+d.$t("table.simulation.name"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},512)}}}),Ot={class:"flex justify-center"},Ht=x({__name:"index",setup(C,{expose:o}){const u=h(!1),r=h(null),t=h(),l=h(k.filter(He,b=>b.categoryLabel!=="SIM"));j(()=>{v.on("/gnss/sim/stage/now",()=>{w()})}),V(()=>{v.off("/gnss/sim/stage/now")});const s=({row:b,column:_,rowIndex:d,columnIndex:f})=>{if(d===6){if(f===0)return[1,2];if(f===1)return[0,0]}if(f===0){const R=p("categoryLabel");return R[d]>0?[R[d],1]:[0,0]}},p=b=>{let _=[],d=0;for(let f=0;f<l.value.length;f++)f===0?(_.push(1),d=0):l.value[f][b]===l.value[f-1][b]?(_[d]+=1,_.push(0)):(_.push(1),d=f);return _},m=async()=>{var b;await w(),(b=r.value)==null||b.handleOpenDialog()},n=()=>{var b;(b=r.value)==null||b.handleCloseDialog()},c=async()=>{u.value=!0,await me(),re(1e3),u.value=!1},w=async()=>{const{data:b}=await de();t.value=b};return o({handleOpenDialog:m,handleCloseDialog:n}),(b,_)=>{var T;const d=i("el-table-column"),f=i("el-table"),R=i("el-tag");return S(),D(Y,{class:"dialog-sim-state-prepare",ref_key:"customDialogRef",ref:r,width:600,title:(T=t.value)==null?void 0:T.stage,"close-on-press-escape":!1},{footer:a(()=>[y("div",Ot,[e(H,{class:"danger",label:"simStop",icon:"icon-stop_fill",onClick:c,loading:u.value},null,8,["loading"])])]),default:a(()=>[e(f,{class:"mt20 no-data",data:[],border:""},{default:a(()=>[e(d,{label:b.$t("table.simulation.configType"),width:"330",align:"center"},null,8,["label"]),e(d,{label:b.$t("table.simulation.configStatus"),align:"center"},null,8,["label"])]),_:1}),e(f,{"show-header":!1,data:l.value,"span-method":s,border:""},{default:a(()=>[e(d,{prop:"categoryLabel",width:"150",align:"center"},{default:a(g=>[y("span",null,E(b.$t(`table.simulation.${g.row.categoryLabel}`)),1)]),_:1}),e(d,{prop:"type",width:"180",align:"center"},{default:a(g=>[y("span",null,E(b.$t(`table.simulation.${g.row.type}`)),1)]),_:1}),e(d,{align:"center"},{default:a(g=>{var A;return[(A=t.value.tasks)!=null&&A[g.row.taskKey]?(S(),D(U,{key:0,label:b.$t(`table.simulation.${t.value.tasks[g.row.taskKey].status}`),status:t.value.tasks[g.row.taskKey].status==="FINISHED"?"success":"warning"},null,8,["label","status"])):(S(),D(R,{key:1},{default:a(()=>[G(E(b.$t("simulation.waitInject")),1)]),_:1}))]}),_:1})]),_:1},8,["data"])]),_:1},8,["title"])}}}),Nt={class:"flex justify-center"},jt=x({__name:"index",setup(C,{expose:o}){const u=h(!1),r=h(),t=h(null),l=h();h([]),h([]);const s=n=>{var c;n.startTime=n.startTime*1e3,n.finishTime=n.finishTime*1e3,l.value=n,(c=t.value)==null||c.handleOpenDialog()},p=()=>{var n;(n=t.value)==null||n.handleCloseDialog()},m=async()=>{u.value=!0,await Me(),await re(1e3),u.value=!1};return o({handleOpenDialog:s,handleCloseDialog:p}),(n,c)=>{var A;const w=i("el-date-picker"),b=i("el-form-item"),_=i("el-col"),d=i("el-row"),f=i("el-form"),R=i("el-table-column"),T=i("el-text"),g=i("el-table");return S(),D(Y,{class:"dialog-sim-state-close",ref_key:"customDialogRef",ref:t,width:800,title:(A=l.value)==null?void 0:A.stage,"close-on-press-escape":!1},{footer:a(()=>[y("div",Nt,[e(H,{label:"confirm",onClick:m,loading:u.value},null,8,["loading"])])]),default:a(()=>[e(f,{ref_key:"modelRef",ref:r,model:l.value},{default:a(()=>[e(d,{gutter:20},{default:a(()=>[e(_,{span:12},{default:a(()=>[e(b,{class:"flex-auto",label:n.$t("simulation.startTime"),prop:"startTime"},{default:a(()=>[e(w,{modelValue:l.value.startTime,"onUpdate:modelValue":c[0]||(c[0]=I=>l.value.startTime=I),type:"datetime",readonly:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(_,{span:12},{default:a(()=>[e(b,{class:"flex-auto",label:n.$t("simulation.finishTime"),prop:"finishTime"},{default:a(()=>[e(w,{modelValue:l.value.finishTime,"onUpdate:modelValue":c[1]||(c[1]=I=>l.value.finishTime=I),type:"datetime",readonly:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"]),e(g,{data:l.value.errors,border:"",style:{height:"300px"}},{default:a(()=>[e(R,{type:"index",label:n.$t("table.common.index"),width:"60"},null,8,["label"]),e(R,{label:n.$t("simulation.errorInfo")},{default:a(I=>[e(T,null,{default:a(()=>[G(E(l.value.errors[I.$index]),1)]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["title"])}}}),qt={class:"flex-auto mt20"},Bt={class:"flex justify-center"},Gt=x({__name:"index",setup(C,{expose:o}){const u=h([]),r=h(null),t=()=>{var m;(m=r.value)==null||m.handleOpenDialog()},l=()=>{var m;(m=r.value)==null||m.handleCloseDialog()};v.on("/gnss/hm/runtime/freqStatus",()=>{s()}),j(()=>{s()}),V(()=>{v.off("/gnss/hm/runtime/freqStatus")});const s=async()=>{const{data:m}=await ue();k(m).forEach(n=>{let c=k.split(n.freqType,"_");n.freq=c[1],n.gnssType=c[0],n.powerFactor=k.round(n.powerFactor,2),n.value=k.cloneDeep(n.powerFactor)}),u.value=m},p=Ve(async m=>{await Fe({freqType:m.freqType,powerFactor:m.value})},1e3);return o({handleOpenDialog:t}),(m,n)=>{const c=i("el-table-column"),w=i("el-slider"),b=i("el-table");return S(),D(Y,{class:"dialog-time-delay",ref_key:"customDialogRef",ref:r,title:"adjustPower"},{footer:a(()=>[y("div",Bt,[e(H,{class:"ml50",label:"cancel",onClick:l})])]),default:a(()=>[y("div",qt,[e(b,{data:u.value,border:"",stripe:"",style:{height:"400px"},"show-header":!1},{default:a(()=>[e(c,{prop:"freqType",align:"center",width:"200"}),e(c,{prop:"powerFactor",align:"center",width:"160"}),e(c,{lign:"center"},{default:a(({row:_})=>[e(w,{class:"pl20 pr20",modelValue:_.value,"onUpdate:modelValue":d=>_.value=d,"show-input":"",min:-100,max:-20,step:.01,onInput:()=>B(p)(_)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1})]),_:1},8,["data"])])]),_:1},512)}}}),Ut=z(Gt,[["__scopeId","data-v-9b90c4e1"]]),zt=x({__name:"index",setup(C){const o=h(null),u=h(null),r=h(null),t=h(null),l=h(null),s=h(null),p=J(),{t:m}=W.useI18n(),n=Ae(),{keepAliveName:c}=ve(n),w=h(),b=h(!0),_=h(),d=h(),f=h(!1),{start:R,stop:T,isPending:g}=fe(()=>{F(),d.value.sse._reconnect()},5e3);v.on("error:axios",$=>{let L=m(`axiosError.${$}`);f.value||(f.value=!0,X({message:L,type:"error",onClose:()=>{f.value=!1}}))}),j(()=>{A(),v.on("/gnss/sim/stage/now",()=>{A()}),v.on("dialog:simReadConfig",()=>{var $;($=o.value)==null||$.handleOpenDialog()}),v.on("dialog:simRenameConfig",$=>{var L;(L=u.value)==null||L.handleOpenDialog($)}),v.on("dialog:simSaveConfig",$=>{var L;(L=r.value)==null||L.handleOpenDialog($)}),v.on("dialog:adjustPower",()=>{var $;($=s.value)==null||$.handleOpenDialog()})}),V(()=>{v.off("/gnss/sim/stage/now"),v.off("dialog:simReadConfig"),v.off("dialog:simRenameConfig"),v.off("dialog:simSaveConfig"),v.off("dialog:eventStreamConfig"),v.off("dialog:adjustPower"),_.value&&(_.value.close(),_.value=null)});const A=async()=>{var L,N,q,Q,ee,te;const{data:$}=await de();w.value=$,v.emit("status:simStage",$),$.stage==="PREPARE"&&((L=t.value)==null||L.handleOpenDialog()),$.stage==="CLOSE"&&((N=t.value)==null||N.handleCloseDialog(),(q=l.value)==null||q.handleOpenDialog($)),$.stage==="IDLE"&&((Q=t.value)==null||Q.handleCloseDialog(),(ee=l.value)==null||ee.handleCloseDialog()),$.stage==="EXECUTE"&&((te=t.value)==null||te.handleCloseDialog())},I=$=>{const L=JSON.parse($);v.emit("isReceive"),R(),v.emit(L.topic,L.data),_.value&&(_.value.close(),_.value=null)},F=()=>{_.value||(_.value=we.error({title:"Error",message:`${m("common.msg.sseDisconnect")}!`,showClose:!1,duration:0,position:"bottom-left"}))};return($,L)=>{const N=i("router-view"),q=i("el-main"),Q=i("el-container");return S(),D(Q,{class:"app-layout flex-column"},{default:a(()=>[e(We,{initStage:w.value},null,8,["initStage"]),e(Q,{class:"flex-auto"},{default:a(()=>[e(at),e(Q,{class:"relative flex flex-auto flex-column"},{default:a(()=>[B(p).path!==B(be)&&B(p).path!==B(ne)?(S(),D(xt,{key:0})):Z("",!0),e(q,{class:"relative flex flex-auto flex-column"},{default:a(()=>[e(N,null,{default:a(({Component:ee,route:te})=>[(S(),D(Se,{include:B(c)},[b.value?(S(),D(ye(ee),{key:te.fullPath})):Z("",!0)],1032,["include"]))]),_:1})]),_:1})]),_:1})]),_:1}),e(qe,{ref_key:"SSERef",ref:d,onOnReceiveMsg:I,onOnDisconnect:F,url:"/api/sse/register"},null,512),e(Dt),e(Lt,{ref_key:"dialogSimReadConfigRef",ref:o},null,512),e(Ft,{ref_key:"dialogSimRenameConfigRef",ref:u},null,512),e(Vt,{ref_key:"dialogSimSaveConfigRef",ref:r},null,512),e(Ht,{ref_key:"dialogSimPreStateRef",ref:t},null,512),e(jt,{ref_key:"dialogSimCloseStateRef",ref:l},null,512),e(Ut,{ref_key:"dialogAdjustPowerRef",ref:s},null,512)]),_:1})}}}),il=z(zt,[["__scopeId","data-v-fe33b30d"]]);export{il as default};
