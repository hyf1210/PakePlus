import{d as B,N as j,r as p,o as F,Z as R,b as m,O as T,c as n,e as _,g as y,f as v,w as d,l as w,t as b,P as A,j as h,F as G,h as M,n as O,V as k,J as U}from"./index-Xku4Yv_8.js";import{g as z,a as J}from"./ephemeris-D7BidhGX.js";import{_ as o}from"./lodash-C7R_B3uJ.js";const L={class:"app-satellite-ephemeris-edit flex flex-auto flex-column"},P={class:"handle flex justify-end"},W={class:"flex-auto mt20"},Z={key:0},Q=B({__name:"edit",setup(q){const f=j(),x=p(),r=p(!1),c=p([]),g=p([]);F(()=>{f.params.name&&C(f.params.name)});const V=a=>{let e=200;return a==="prn"&&(e=50),e},C=async a=>{r.value=!0;const{data:e}=await z({gnssType:"bds",fileName:a});o(e).forEach(l=>{o.forEach(l,(s,i)=>l[i]=R(s))}),c.value=e,g.value=Object.keys(e[0]),r.value=!1},D=async a=>{let e=c.value;e.splice(a,1),await O(),c.value=e},S=async()=>{r.value=!0;let a=o.cloneDeep(c.value);o(a).forEach(l=>{o.forEach(l,(s,i)=>l[i]=o.toNumber(s))});const e=await J("bds",f.params.name,a);e.code===0?k({message:e.msg,type:"success"}):k({message:e.msg,type:"error"}),await U(1e3),r.value=!1};return(a,e)=>{const l=m("el-button"),s=m("el-table-column"),i=m("el-input"),$=m("el-table"),E=T("loading");return n(),_("div",L,[y("div",P,[v(l,{type:"primary",onClick:S},{default:d(()=>[w(b(a.$t("btn.save")),1)]),_:1})]),y("div",W,[A((n(),h($,{class:"h100",data:c.value,border:"",stripe:"",size:"small",ref_key:"tableRef",ref:x,"element-loading-svg-view-box":"-10, -10, 50, 50"},{default:d(()=>[v(s,{align:"center",label:a.$t("table.common.operation"),fixed:"",width:"60"},{default:d(t=>[v(l,{link:"",type:"danger",onClick:u=>D(t.$index)},{default:d(()=>[w(b(a.$t("btn.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"]),(n(!0),_(G,null,M(g.value,t=>(n(),h(s,{key:t,align:"center",label:a.$t(`table.ephBDS.${t}`),width:V(t)},{default:d(u=>[t==="prn"?(n(),_("span",Z,b(u.row[t]),1)):(n(),h(i,{key:1,modelValue:u.row[t],"onUpdate:modelValue":N=>u.row[t]=N},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label","width"]))),128))]),_:1},8,["data"])),[[E,r.value]])])])}}});export{Q as default};
