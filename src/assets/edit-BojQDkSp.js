import{d as P,v as R,r as g,W as A,b as r,c as h,j as x,w as a,f as e,G as E,e as U,h as K,u as Q,F as W,g as j,X,Y,t as C,l as S,Q as J,N as ee,o as ae,V as F}from"./index-Xku4Yv_8.js";import{_ as le}from"./index.vue_vue_type_style_index_0_lang-CVeWsgLW.js";import{T as te}from"./dict-BKYb64jL.js";import{_ as $}from"./lodash-C7R_B3uJ.js";import{G as L}from"./index-DXDSQOyL.js";import{t as oe,a as ne}from"./trajectory-DzLrkcBW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const re=P({__name:"index",setup(M,{expose:b}){const{t:n}=R.useI18n(),m=g(),t=g({duration:void 0}),y=A({duration:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.duration"),trigger:"change"}]}),p=async()=>await new Promise(o=>{m.value&&m.value.validate(l=>{o(l?t.value:!1)})});return b({handleGetModel:async()=>await p()}),(o,l)=>{const d=r("el-input-number"),c=r("el-form-item"),u=r("el-col"),f=r("el-row"),v=r("el-form");return h(),x(v,{ref_key:"modelRef",ref:m,model:t.value,rules:y},{default:a(()=>[e(f,{gutter:20},{default:a(()=>[e(u,{span:24},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.duration")+"：",prop:"duration"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.duration,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.duration=s),controls:!1,step:.001,precision:3,min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),se=P({__name:"index",setup(M,{expose:b}){const{t:n}=R.useI18n(),m=g(),t=g({speed:void 0,acc:void 0,jerk:void 0,angle:void 0,duration:void 0}),y=A({speed:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.speed"),trigger:"change"}],acc:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.acc"),trigger:"change"}],jerk:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.jerk"),trigger:"change"}],angle:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.angle"),trigger:"change"}],duration:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.duration"),trigger:"change"}]}),p=async()=>await new Promise(o=>{m.value&&m.value.validate(l=>{o(l?t.value:!1)})});return b({handleGetModel:async()=>await p()}),(o,l)=>{const d=r("el-input-number"),c=r("el-form-item"),u=r("el-col"),f=r("el-row"),v=r("el-form");return h(),x(v,{ref_key:"modelRef",ref:m,model:t.value,rules:y,"label-width":"160"},{default:a(()=>[e(f,{gutter:20},{default:a(()=>[e(u,{span:8},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.speed")+"：",prop:"speed"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.speed,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.speed=s),controls:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.acc")+"：",prop:"acc"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.acc,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.acc=s),controls:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.jerk")+"：",prop:"jerk"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.jerk,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.jerk=s),controls:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(f,{class:"mt20",gutter:20},{default:a(()=>[e(u,{span:8},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.angle")+"：",prop:"angle"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.angle,"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.angle=s),controls:!1,min:0,max:360},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.duration")+"：",prop:"duration"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.duration,"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.duration=s),controls:!1,step:.001,precision:3,min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ue=P({__name:"index",setup(M,{expose:b}){const{t:n}=R.useI18n(),m=g(),t=g({radius:void 0,startAngle:void 0,angularVelocity:void 0,duration:void 0}),y=A({radius:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.radius"),trigger:"change"}],startAngle:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.startAngle"),trigger:"change"}],duration:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.duration"),trigger:"change"}],angularVelocity:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.angularVelocity"),trigger:"change"}]}),p=async()=>await new Promise(o=>{m.value&&m.value.validate(l=>{o(l?t.value:!1)})});return b({handleGetModel:async()=>await p()}),(o,l)=>{const d=r("el-input-number"),c=r("el-form-item"),u=r("el-col"),f=r("el-row"),v=r("el-form");return h(),x(v,{ref_key:"modelRef",ref:m,model:t.value,rules:y,"label-width":"140"},{default:a(()=>[e(f,{gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.radius")+"：",prop:"radius"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.radius,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.radius=s),controls:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.startAngle")+"：",prop:"startAngle"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.startAngle,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.startAngle=s),controls:!1,min:0,max:360},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(f,{class:"mt20",gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.angularVelocity")+"：",prop:"angularVelocity"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.angularVelocity,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.angularVelocity=s),controls:!1,min:0,max:360},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.duration")+"：",prop:"duration"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.duration,"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.duration=s),controls:!1,step:.001,precision:3,min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ie=P({__name:"index",setup(M,{expose:b}){const{t:n}=R.useI18n(),m=g(),t=g({initialSpeed:void 0,azimuth:void 0,elevation:void 0,gravity:9.80665,duration:void 0}),y=A({initialSpeed:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.initialSpeed"),trigger:"change"}],azimuth:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.azimuth"),trigger:"change"}],duration:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.duration"),trigger:"change"}],elevation:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.elevation"),trigger:"change"}],gravity:[{required:!0,message:n("common.placeholder.input")+n("trajectoryMotionParams.gravity"),trigger:"change"}]}),p=async()=>await new Promise(o=>{m.value&&m.value.validate(l=>{o(l?t.value:!1)})});return b({handleGetModel:async()=>await p()}),(o,l)=>{const d=r("el-input-number"),c=r("el-form-item"),u=r("el-col"),f=r("el-row"),v=r("el-form");return h(),x(v,{ref_key:"modelRef",ref:m,model:t.value,rules:y,"label-width":"170"},{default:a(()=>[e(f,{gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.initialSpeed")+"：",prop:"initialSpeed"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.initialSpeed,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.initialSpeed=s),controls:!1,min:1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.azimuth")+"：",prop:"azimuth"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.azimuth,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.azimuth=s),controls:!1,min:0,max:360},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(f,{class:"mt20",gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.elevation")+"：",prop:"elevation"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.elevation,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.elevation=s),controls:!1,min:0,max:90},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.gravity")+"：",prop:"gravity"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.gravity,"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.gravity=s),controls:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(f,{class:"mt20",gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(c,{class:"flex-auto",label:o.$t("trajectoryMotionParams.duration")+"：",prop:"duration"},{default:a(()=>[e(d,{class:"w100",modelValue:t.value.duration,"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.duration=s),controls:!1,step:.001,precision:3,min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),de={class:"flex-auto flex"},me={class:"custom-bg-box flex-auto"},ce={class:"flex items-end"},pe=P({__name:"index",props:{initData:{type:Array}},setup(M,{expose:b}){const n=M,{t:m}=R.useI18n(),t={STATIC:re,LINEAR_HORIZONAL:se,CIRCLE_HORIZONAL:ue,BALLISTIC_IDEAL:ie},y=g(),p=g(),_=g({type:"STATIC",motion:[]}),o=A({type:[{required:!0,message:m("common.placeholder.select")+m("table.track.type")}],motion:[{required:!0,message:m("common.placeholder.add")+m("table.track.motionList")}]});E(()=>n.initData,i=>{i&&(_.value.motion=i)},{deep:!0});const l=async()=>await new Promise(i=>{p.value&&p.value.validate(V=>{i(V?_.value:!1)})}),d=async()=>await y.value.handleGetModel(),c=async()=>await l(),u=()=>{var i;(i=p.value)==null||i.resetFields()},f=async()=>{const i=await d();i&&_.value.motion.push({type:_.value.type,...i})},v=i=>{let V=[];return $.forEach(i,(G,k)=>{if(k!=="type"){let q=m(`trajectoryMotionParams.${k}`);V.push(`${q}：${G}`)}}),$.join(V,"，")},s=i=>{_.value.motion.splice(i,1)};return b({handleGetModel:c,handleResetForm:u}),(i,V)=>{const G=r("el-option"),k=r("el-select"),q=r("el-form-item"),I=r("el-col"),T=r("el-row"),z=r("Plus"),B=r("el-icon"),D=r("el-table-column"),N=r("el-tag"),O=r("el-button"),H=r("el-table"),Z=r("el-form");return h(),x(Z,{class:"flex-auto combination-track flex flex-column",ref_key:"modelRef",ref:p,model:_.value,rules:o,"label-width":"100px"},{default:a(()=>[e(T,{gutter:20},{default:a(()=>[e(I,{span:12},{default:a(()=>[e(q,{class:"flex-auto",label:i.$t("table.track.type")+"：",prop:"type"},{default:a(()=>[e(k,{modelValue:_.value.type,"onUpdate:modelValue":V[0]||(V[0]=w=>_.value.type=w),placeholder:i.$t("common.placeholder.select"),style:{width:"100%"}},{default:a(()=>[(h(!0),U(W,null,K(Q(te),w=>(h(),x(G,{key:w.type,label:i.$t(`trajectoryMotion.${w.type}`),value:w.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:20},{default:a(()=>[e(I,{span:24},{default:a(()=>[e(q,{class:"flex-auto"},{default:a(()=>[j("div",de,[j("div",me,[(h(),x(X,null,[(h(),x(Y(t[_.value.type]),{ref_key:"dynamicRef",ref:y},null,512))],1024))]),j("div",ce,[j("div",{class:"btn flex items-center justify-center pointer ml10",onClick:f},[e(B,null,{default:a(()=>[e(z)]),_:1}),j("span",null,C(i.$t("btn.addToTabel")),1)])])])]),_:1})]),_:1})]),_:1}),e(q,{class:"flex flex-auto",label:i.$t("table.track.motionList")+"：",prop:"motion"},{default:a(()=>[e(H,{class:"h100",data:_.value.motion,border:"",stripe:""},{default:a(()=>[e(D,{type:"index",align:"center",label:i.$t("table.common.index"),width:"100"},null,8,["label"]),e(D,{prop:"type",align:"center",label:i.$t("table.track.type"),width:"200"},{default:a(w=>[e(N,{type:"primary"},{default:a(()=>[S(C(i.$t(`trajectoryMotion.${w.row.type}`)),1)]),_:2},1024)]),_:1},8,["label"]),e(D,{align:"center",label:i.$t("table.track.params"),"show-overflow-tooltip":""},{default:a(w=>[j("span",null,C(v(w.row)),1)]),_:1},8,["label"]),e(D,{align:"center",label:i.$t("table.common.operation"),width:"100"},{default:a(w=>[e(O,{type:"danger",link:"",onClick:ve=>s(w.$index)},{default:a(()=>[S(C(i.$t("btn.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}}),fe={class:"form-carrier-track flex flex-column"},_e=P({__name:"index",props:{initData:{type:Object}},setup(M,{expose:b}){const n=M,{t:m}=R.useI18n(),t=g(),y=g(null),p=g({}),_=A({name:[{required:!0,message:m("common.placeholder.input")+m("table.common.filename"),trigger:"blur"}]});E(()=>n.initData,u=>{u&&(p.value=$.cloneDeep(u))},{deep:!0});const o=async()=>await new Promise(u=>{t.value&&t.value.validate(f=>{u(f?p.value:!1)})}),l=async()=>{const u=await d(),f=await c(),v=await Promise.all([u,f]);if($.every(v,Boolean)){let s={};return $.map(v,i=>$.merge(s,i)),s}else return!1},d=async()=>await o(),c=async()=>{var u;return await((u=y.value)==null?void 0:u.handleGetModel())};return b({handleGetModel:l}),(u,f)=>{const v=r("el-input"),s=r("el-form-item"),i=r("el-col"),V=r("el-row"),G=r("el-form");return h(),U("div",fe,[e(G,{class:"flex-auto flex flex flex-column",ref_key:"modelRef",ref:t,model:p.value,rules:_,"label-width":"100px"},{default:a(()=>[e(V,{gutter:20},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(s,{class:"flex-auto",label:u.$t("table.common.filename")+"：",prop:"name"},{default:a(()=>[e(v,{modelValue:p.value.name,"onUpdate:modelValue":f[0]||(f[0]=k=>p.value.name=k)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(V,{class:"flex-auto flex flex-column",gutter:20},{default:a(()=>[e(i,{class:"flex-auto",span:24},{default:a(()=>[e(pe,{ref_key:"combinationRef",ref:y,initData:p.value.list},null,8,["initData"])]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}}),ge={class:"app-track-edit flex flex-column flex-auto pl40 pr40"},ye={class:"flex ml50 mt20"},$e=P({__name:"edit",setup(M){const b=J(),n=ee(),m=g({}),t=g(null);ae(()=>{n.params.name&&_(n.params.name)});const y=async()=>{var l;const o=await((l=t.value)==null?void 0:l.handleGetModel());if(o){const d=await ne(o.motion,o.name);d.code===0?F({type:"success",message:d.msg}):F({type:"error",message:d.msg}),p()}},p=()=>{b.push("/scene/carrier")},_=async o=>{const{data:l}=await oe(o);let d=[];$(l).forEach(c=>{d.push(c)}),m.value.name=o,m.value.list=d};return(o,l)=>(h(),U("div",ge,[e(le,{label:"carrierTrack"}),e(_e,{class:"mt20 flex-auto",ref_key:"fromRef",ref:t,initData:m.value},null,8,["initData"]),j("div",ye,[e(L,{class:"ml50",label:"confirm",onClick:y}),e(L,{class:"ml50",label:"cancel",onClick:p})])]))}});export{$e as default};
