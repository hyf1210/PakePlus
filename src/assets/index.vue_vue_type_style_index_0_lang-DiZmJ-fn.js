import{C as y}from"./index-DupTiM6y.js";import{i as g,u as b}from"./index-D-dxq8MR.js";import{u as h,c as S,r as _,e as v}from"./europe-DNtwB6DZ.js";import{b as x}from"./gnss-D7gCU5rb.js";import{_ as o}from"./lodash-C7R_B3uJ.js";import{d as z,r as f,s as $,m as p,o as w,a as k,c as L,e as T,f as A,g as d}from"./index-Xku4Yv_8.js";const E={class:"constellation-chart h100 flex flex-column"},B={class:"flex-auto"},R=z({__name:"index",setup(C){const s=f(),n=$(),a=f([]);p.on("/satellite/ae",()=>{i()}),w(()=>{m(),i()}),k(()=>{p.off("/satellite/ae")});const i=async()=>{const{data:l}=await x();let e=[];e=o.groupBy(o(o.cloneDeep(l)).forEach(t=>{var r,u;t.value=[(r=t==null?void 0:t.ae)==null?void 0:r.el,(u=t==null?void 0:t.ae)==null?void 0:u.az],t.name=t.gnssType+t.prn}),"gnssType"),a.value=e||[],c()},m=()=>{n.value=g(s.value),c()},c=()=>{let l={polar:{center:["50%","55%"],radius:"70%"},legend:{data:Object.keys(a.value),top:"20",itemWidth:15,itemHeight:15,itemGap:20,textStyle:{color:"#BFE3FF"},inactiveColor:"#525457",formatter:e=>{var r;let t=((r=a.value[e])==null?void 0:r.length)||0;return e+`(${t})`}},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2,padding:0,backgroundColor:"transparent",borderColor:"transparent",textStyle:{fontSize:12,color:"#fff"},formatter:e=>`<div class='tooltip-box'>${e.data.gnssType}-${e.data.prn} <br/>[Az: `+e.value[1]+"ï¼ŒEl:"+(90-e.value[0])+"]</div>"},angleAxis:{type:"value",min:0,max:360,axisTick:{show:!1},axisLabel:{show:!0,formatter:e=>{let t="";switch(e){case 0:t="N";break;case 90:t="E";break;case 180:t="S";break;case 270:t="W";break;default:t=""}return t}},axisLine:{lineStyle:{color:"#357F9E"}},splitLine:{lineStyle:{color:"#357F9E"}}},radiusAxis:{type:"value",min:0,max:90,splitNumber:3,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:"#fff",fontSize:10,align:"left",verticalAlign:"middle",formatter:e=>90-e},splitLine:{lineStyle:{color:"#357F9E"}}},series:[{name:"GPS",type:"scatter",coordinateSystem:"polar",z:5,data:o.get(a.value,"GPS"),symbolSize:15,itemStyle:{color:"rgb(9,71,255)"},label:{show:!0,position:"bottom",fontSize:8,formatter:e=>`${e.data.gnssType}-${e.data.prn}`},symbol:`image://${h}`},{name:"BDS",type:"scatter",coordinateSystem:"polar",z:5,data:o.get(a.value,"BDS"),symbolSize:15,itemStyle:{color:"rgb(255,9,30)"},label:{show:!0,position:"bottom",fontSize:8,formatter:e=>`${e.data.gnssType}-${e.data.prn}`},symbol:`image://${S}`},{name:"GLO",type:"scatter",coordinateSystem:"polar",z:5,data:o.get(a.value,"GLO"),symbolSize:15,itemStyle:{color:"rgb(126,125,125)"},label:{show:!0,position:"bottom",fontSize:8,formatter:e=>`${e.data.gnssType}-${e.data.prn}`},symbol:`image://${_}`},{name:"GAL",type:"scatter",coordinateSystem:"polar",z:5,data:o.get(a.value,"GAL"),symbolSize:15,itemStyle:{color:"rgb(126,125,125)"},label:{show:!0,position:"bottom",fontSize:8,formatter:e=>`${e.data.gnssType}-${e.data.prn}`},symbol:`image://${v}`}]};b(n.value,l)};return(l,e)=>(L(),T("div",E,[A(y,{title:"constellationChart"}),d("div",B,[d("div",{class:"charts",ref_key:"echartsRef",ref:s},null,512)])]))}});export{R as _};
