import{_ as S}from"./index.vue_vue_type_style_index_0_lang-CVeWsgLW.js";import{d as I,v as B,r as a,m as n,o as L,a as A,b as c,c as E,e as H,f as t,g,w as s,l as b,t as C}from"./index-Xku4Yv_8.js";import{u as N}from"./useHandleData-CjGr2aYO.js";import{b as T,c as V,d as j}from"./simulation-C2GBFQc4.js";import{_ as h}from"./lodash-C7R_B3uJ.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"config-history h100 flex flex-column"},M={class:"flex-auto mt20"},U={class:"flex justify-center"},q=I({__name:"index",setup(F){const{t:m}=B.useI18n(),f=a(),u=a([]),l=a(),d=a();n.on("sim:reset",()=>{v()}),n.on("refresh:SimConfigList",()=>{i()}),L(()=>{i()}),A(()=>{n.off("sim:reset"),n.off("refresh:SimConfigList")});const v=()=>{d.value=null,f.value.setCurrentRow({}),l.value={}},w=async e=>{await N(m,V,e.name,`${m("btn.delete")}【${e.name}】`),i()},y=e=>{n.emit("dialog:simRenameConfig",e)},$=async e=>{await x(e);const o=h.cloneDeep(l.value);n.emit("dialog:simConfigGet",o)},k=e=>{h.isEmpty(e)||(d.value=e,$(e.name))},i=async()=>{const{data:e}=await T();u.value=e},x=async e=>{const{data:o}=await j({name:e});l.value=o};return(e,o)=>{const r=c("el-table-column"),_=c("el-button"),D=c("el-table");return E(),H("div",G,[t(S,{label:"simConfigHistory"}),g("div",M,[t(D,{class:"h100",data:u.value,border:"",size:"small",ref_key:"singleTableRef",ref:f,"highlight-current-row":"",onCurrentChange:k},{default:s(()=>[t(r,{type:"index",label:e.$t("table.common.index"),width:"60",align:"center"},null,8,["label"]),t(r,{prop:"name",label:e.$t("table.simulation.name"),"show-overflow-tooltip":""},null,8,["label"]),t(r,{label:e.$t("table.common.operation"),width:"130"},{default:s(p=>[g("div",U,[t(_,{type:"danger",link:"",onClick:R=>w(p.row)},{default:s(()=>[b(C(e.$t("btn.delete")),1)]),_:2},1032,["onClick"]),t(_,{type:"success",link:"",onClick:R=>y(p.row)},{default:s(()=>[b(C(e.$t("btn.rename")),1)]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data"])])])}}}),X=z(q,[["__scopeId","data-v-a896f844"]]);export{X as default};
